<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=5">

  
  <title>Configuring Wi-Fi on Ubuntu Server 64-bit on Raspberry Pi 4</title>


  <meta name="description" content="">
  <meta name="keywords" content="">

  <meta name="author" content="Oleg Atamanenko">


  <link rel="stylesheet" media="screen" href="https://fontlibrary.org/face/go-mono" type="text/css"/>
  <link rel="stylesheet" media="screen" href="https://fonts.googleapis.com/css?family=Arvo" type="text/css"/>


  
  
  <link rel="stylesheet" href="https://uthark.github.io/css/uthark.css">

  
  

  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">

  
  <link href="https://uthark.github.io/favicon.png" rel="icon">

  
  
  


  


  
  <link href="https://feeds.feedburner.com/atamanenko" rel="alternate" type="application/rss+xml" title="Sharing knowledge" />
  

  
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@LinkageError">
  <meta name="twitter:creator" content="@LinkageError">

  <meta name="twitter:title" content="Configuring Wi-Fi on Ubuntu Server 64-bit on Raspberry Pi 4">

  

  <meta property="og:title" content="Configuring Wi-Fi on Ubuntu Server 64-bit on Raspberry Pi 4" />
  <meta property="og:url" content="https://uthark.github.io/post/2020-09-01-raspberry-pi-ubuntu-arm64/" />
  <meta property="og:description" content="After discovering that by default Raspberry installs 32-bit Raspbian OS, I wanted to reinstall it with a 64 bit - this would allow to run Kubernetes on Raspberry
Decided to go with Ubuntu Server 64.
Installed it on SD Card with Raspberry Pi Imager.
After boot found out that need to connect it to WI-FI.
Configuring wpa_supplicant didn&rsquo;t help, still had issues with not getting IP Address from DHCP.
Finally, did the following:" />

  




</head>
<body>

<header>
  
  <h1><a href="https://uthark.github.io/">Sharing knowledge</a></h1>
    <h2>by Oleg Atamanenko</h2>
</header>


<nav>

<ul class="main-navigation">
  
  
    
      <li><a href="https://uthark.github.io/" title="Blog">Blog</a></li>
    
  
    
      <li><a href="https://uthark.github.io/readinglist/" title="Reading Lists" >Reading Lists</a></li>
    
  
    
      <li><a href="https://uthark.github.io/categories/" title="Categories" >Categories</a></li>
    
  
    
      <li><a href="https://uthark.github.io/usefularticles/" title="Useful Articles" >Useful Articles</a></li>
    
  
    
      <li><a href="https://uthark.github.io/about/" title="About" >About</a></li>
    
  
</ul>


<ul class="subscription">
  
    
        
        
        <li><a href="https://feeds.feedburner.com/atamanenko" target="_blank" type="application/rss+xml" title="RSS"><i class="fa fa-rss-square fa-lg"></i></a></li>
        

    
  

</ul>


<form action="https://www.google.com/search" method="get" target="_blank">
  <fieldset role="search">
  	<input class="search" type="text" name="q" placeholder="Search"/>
    <input type="hidden" name="q" value="site:https://uthark.github.io/" />
  </fieldset>
</form>

</nav>


<div id="main">
  <div id="content">
    <div>
      <article class="hentry">

        
        
<div class="sharing">
    <a href="https://getpocket.com/save?url=https%3a%2f%2futhark.github.io%2fpost%2f2020-09-01-raspberry-pi-ubuntu-arm64%2f" target="_blank" ><i class="fa fa-get-pocket" title="Save to Pocket" aria-hidden="true"></i></a>
    <a href="https://twitter.com/intent/tweet?text=Configuring%20Wi-Fi%20on%20Ubuntu%20Server%2064-bit%20on%20Raspberry%20Pi%204&url=https%3a%2f%2futhark.github.io%2fpost%2f2020-09-01-raspberry-pi-ubuntu-arm64%2f" target="_blank" title="Post to Twitter" aria-hidden="true"><i class="fa fa-twitter"></i></a>
</div>
<header>
    <h1 class="entry-title">
         Configuring Wi-Fi on Ubuntu Server 64-bit on Raspberry Pi 4 
    </h1>

</header>


        <div class="entry-content">
          
          
          
          
          <p>After discovering that by default Raspberry installs <a href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">32-bit Raspbian OS</a>, I wanted to reinstall it with a 64 bit - this would allow to run Kubernetes on Raspberry</p>
<p>Decided to go with <a href="https://ubuntu.com/download/raspberry-pi">Ubuntu Server 64</a>.</p>
<p>Installed it on SD Card with <a href="https://www.raspberrypi.org/downloads/">Raspberry Pi Imager</a>.</p>
<p>After boot found out that need to connect it to WI-FI.</p>
<p>Configuring <code>wpa_supplicant</code> didn&rsquo;t help, still had issues with not getting IP Address from DHCP.</p>
<p>Finally, did the following:</p>
<ol>
<li>
<p>Create <code>/etc/netplan/01-netcfg.yaml</code> and put the following content there:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">network:
  version: 2
  renderer: networkd
  wifis:
    wlan0:
      dhcp4: true
      dhcp6: true
      optional: true
      access-points:
        &#34;&lt;replace with your wifi network name/SSID&gt;&#34;:
          password: &#34;&lt;replace with your password&gt;&#34;
</code></pre></div></li>
<li>
<p>Change permissions to make file accessible only to <code>root</code> user:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">chmod 600 /etc/netplan/01-netcfg.yaml
</code></pre></div></li>
<li>
<p>Configure <a href="https://linux.die.net/man/8/crda">Linux wireless central regulatory domain agent</a>. Put your country code in <code>/etc/default/crda</code></p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">REGDOMAIN=US
</code></pre></div></li>
<li>
<p>After that, need to generate and apply netplan:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo netplan --debug generate
sudo netplan --debug apply
</code></pre></div></li>
</ol>

        </div>
        

<footer>
  <div>
    <p>If you have any questions, feel free to ping me on Twitter.</p>
  </div>
  <p class="meta">
    
    
    
    
    Filed under: <a class="label" href="https://uthark.github.io/categories/raspberrypi/">raspberrypi</a><a class="label" href="https://uthark.github.io/categories/ubuntu/">ubuntu</a><a class="label" href="https://uthark.github.io/categories/arm64/">arm64</a>
    
  </p>

  <p class="meta">
    
    Last update: <time datetime="2020-09-02">Sep 2, 2020</time>
    
    <span class="categories">
        Tags:
      
          <a class="category" href="https://uthark.github.io/tags/ubuntu">ubuntu</a>  <a class="category" href="https://uthark.github.io/tags/wpa_supplicant">wpa_supplicant</a>  <a class="category" href="https://uthark.github.io/tags/netplan">netplan</a>  <a class="category" href="https://uthark.github.io/tags/wi-fi">wi-fi</a>  
    </span>
    
  </p>
  


  

  <p class="meta">
    
        <a class="basic-alignment left" href="https://uthark.github.io/post/2020-08-31-pihole/" title="Raspberry Pi with pi-hole">Raspberry Pi with pi-hole</a>
    

    
  </p>
  
    
  
</footer>

      </article>
      
    </div>
    

<aside class="sidebar thirds">
  <section class="first odd">

    

    <p>
      
    </p>
  </section>


<section class="even">
  <div class="toc-header">Table of Contents</div>
   <nav id="TableOfContents"></nav>
</section>





  

  

  
  
  

</aside>

  </div>
</div>

<footer>
    
    <div class="center">
        <ul class="sidebar-nav">
            <li class="sidebar-nav-item">
                <a target="_blank" href="https://github.com/uthark/" title="https://github.com/uthark/"><i
                    class="fa fa-github fa-3x"></i></a></li>
            <li class="sidebar-nav-item">    <a target="_blank" href="https://bitbucket.org/uthark/" title="https://bitbucket.org/uthark/"><i
                    class="fa fa-bitbucket fa-3x"></i></a>
            <li class="sidebar-nav-item">
            <li class="sidebar-nav-item"><a target="_blank" href="#ZgotmplZ" title="map[card:summary creator:@LinkageError site:@LinkageError]"><i
                    class="fa fa-twitter fa-3x"></i></a>
            <li class="sidebar-nav-item"><a target="_blank" href="https://keybase.io/uthark/" title="https://keybase.io/uthark/"><i
                    class="fa fa-key fa-3x"></i></a> 
            <li class="sidebar-nav-item">
            <li class="sidebar-nav-item"><a target="_blank" href="http://stackoverflow.com/users/216764/uthark" title="http://stackoverflow.com/users/216764/uthark"><i
                    class="fa fa-stack-overflow fa-3x"></i></a>
            <li class="sidebar-nav-item">
            <li class="sidebar-nav-item">
            <li class="sidebar-nav-item">
            <li class="sidebar-nav-item">
                
                
            </li>
        </ul>
    </div>
    <p>Copyright &copy; 2009&nbsp;â€”&nbsp;2020 Oleg Atamanenko - <a href="https://uthark.github.io/license/">License</a> -
        <span class="credit">Powered by <a target="_blank" href="https://gohugo.io">Hugo</a>, uses custom theme based on
            <a target="_blank" href="https://github.com/parsiya/hugo-octopress/">Hugo-Octopress</a> theme.</span>
    </p>

</footer>


<script>
    var _gaq = [['_setAccount', 'UA-8688665-1'], ['_trackPageview']];
    (function (d, t) {
        var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
        s.async = 'async'
        g.src = ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g, s)
    }(document, 'script'));
</script>


</body>
</html>

